<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <title>搜索 | Looks Blog</title>
    <meta name="description" content="A personal blog powered by GitHub Issues" />
    
    <link rel="stylesheet" href="/looks-blog/assets/dist/main.css" />

    <!-- Fonts -->
    <link rel="stylesheet" href="/looks-blog/assets/fonts/HarmonyOS_Sans_SC/main.css" />
    <link rel="preconnect" href="https://fontsapi.zeoseven.com" crossorigin />
    <link
      rel="stylesheet"
      href="https://fontsapi.zeoseven.com/292/main/result.css"
      onerror="this.href='https://fontsapi-storage.zeoseven.com/292/main/result.css'"
    />
    <link
      rel="stylesheet"
      href="https://fontsapi.zeoseven.com/285/main/result.css"
      onerror="this.href='https://fontsapi-storage.zeoseven.com/285/main/result.css'"
    />
    <link
      rel="stylesheet"
      href="https://fontsapi.zeoseven.com/442/main/result.css"
      onerror="this.href='https://fontsapi-storage.zeoseven.com/442/main/result.css'"
    />
    
    <script src="/looks-blog/assets/dist/main.iife.js"></script>
  </head>

  <body>
    <header>
      <div
        class="mt-20 mb-20 flex flex-col items-center justify-center gap-8 sm:flex-row sm:gap-14"
      >
        <img
          src="https://github.com/Master08s.png"
          class="h-40 rounded-full filter-none"
          alt="Avatar"
        />

        <div class="flex flex-col items-center gap-5 font-mono">
          <div class="text-4xl">Looks Blog</div>

          <!-- 社交媒体 -->
          <div class="text-center">
            <a class="text-black" href="https://github.com/Master08s" target="_blank">
              <span class="iconify-large icon-[mingcute--github-line]"></span>
            </a>
          </div>

          <!-- 导航栏 -->
          <nav class="flex justify-center gap-3">
            <a class="index-nav" href="/looks-blog/">首页</a>
            <a class="index-nav" href="/looks-blog/archives.html">归档</a>
            <a class="index-nav" href="/looks-blog/categories.html">分类</a>
            <a class="index-nav" href="/looks-blog/search.html">
              <span class="iconify icon-[fa-solid--search]"></span>
            </a>
          </nav>
        </div>
      </div>
    </header>

    <main class="mx-auto max-w-[768px]">
      <div class="mb-8 text-center font-serif text-2xl font-bold">
        <span class="icon-[fa-solid--search] iconify-inline"></span>
        搜索
      </div>

      <div class="mb-8">
        <input
          type="text"
          id="search-input"
          placeholder="输入关键词搜索文章..."
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <div id="search-results" class="space-y-4">
        <div class="text-center text-gray-500">
          输入关键词开始搜索
        </div>
      </div>
    </main>

    <footer class="pt-20 pb-6">
      <div class="flex flex-col items-center gap-1">
        <div>
          © <span id="current-year"></span> · Master08s
        </div>
        <div>
          Powered by <a href="https://github.com/Master08s/looks-blog">GitHub Issues</a>
        </div>
      </div>
    </footer>

    <script>
      document.getElementById('current-year').textContent = new Date().getFullYear();
      
      // 简单的客户端搜索功能
      let posts = [];
      
      // 加载文章数据
      fetch('/looks-blog/search-data.json')
        .then(response => response.json())
        .then(data => {
          posts = data;
        })
        .catch(error => {
          console.error('Failed to load search data:', error);
        });
      
      const searchInput = document.getElementById('search-input');
      const searchResults = document.getElementById('search-results');
      
      searchInput.addEventListener('input', (e) => {
        const query = e.target.value.trim().toLowerCase();
        
        if (query.length < 2) {
          searchResults.innerHTML = '<div class="text-center text-gray-500">输入关键词开始搜索</div>';
          return;
        }
        
        const results = posts.filter(post => 
          post.title.toLowerCase().includes(query) ||
          post.excerpt.toLowerCase().includes(query) ||
          post.labels.some(label => label.name.toLowerCase().includes(query))
        );
        
        if (results.length === 0) {
          searchResults.innerHTML = '<div class="text-center text-gray-500">没有找到相关文章</div>';
          return;
        }
        
        const resultsHtml = results.map(post => `
          <article class="index-post-card hover:shadow-card text-black transition duration-300">
            <a href="${post.url}">
              <div class="p-6">
                <h2 class="mb-3 font-serif text-xl font-bold">${post.title}</h2>
                <p class="mb-4 text-gray-600">${post.excerpt}</p>
                <div class="flex items-center justify-between text-sm">
                  <time class="text-gray">${post.created_at}</time>
                  <div class="flex gap-2">
                    ${post.labels.map(label => `<span class="category" style="background-color: #${label.color}20; color: #${label.color}">${label.name}</span>`).join('')}
                  </div>
                </div>
              </div>
            </a>
          </article>
        `).join('');
        
        searchResults.innerHTML = resultsHtml;
      });
    </script>
  </body>
</html>
